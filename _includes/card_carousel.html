{% assign slide_count = site.projects | size %}
{% assign sorted_projects = site.projects | sort: "start_date" | reverse %}

<div class="glide">
  <div class="glide__track-container">
    <div class="glide__track" data-glide-el="track">
      <ul class="glide__slides">
        {% for project in sorted_projects %}
          <li class="glide__slide">{% include project_card.html %}</li>
        {% endfor %}
      </ul>
    </div>
    <div class="glide__bullets" data-glide-el="controls[nav]">
      {% for slide_index in (1..slide_count) %}
        <button class="glide__bullet" data-glide-dir="={{ slide_index | minus: 1 }}"></button>
      {% endfor %}
    </div>
  </div>

  <div class="glide__arrows" data-glide-el="controls">
    <button class="glide__arrow glide__arrow--left" data-glide-dir="<">❮</button>
    <button class="glide__arrow glide__arrow--right" data-glide-dir=">">❯</button>
  </div>
</div>
<script>
  new Glide('.glide', {
    // autoplay: 3000,
    // hoverpause: true,
    type: 'carousel',
    perView: 4,
    gap: 18,
    peek: {
      before: 180,
      after: 180
    },
    breakpoints: {
      3840: {
        perView: 3,
        peek: { before: 40, after: 40 }
      },
      1920: {
        perView: 2,
        peek: { before: 80, after: 80 }
      },
      1250: {
        perView: 1,
        peek: { before: 80, after: 80 }
      },
      1080: {
        perView: 1,
        peek: { before: 80, after: 80 }
      },
      780: {
        perView: 1,
        peek: { before: 8, after: 8 }
      },
    }
  }).mount();
</script>
